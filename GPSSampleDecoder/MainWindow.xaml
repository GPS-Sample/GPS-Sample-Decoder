<Window x:Class="GPSSampleDecoder.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GPSSampleDecoder"
        xmlns:VM="clr-namespace:GPSSampleDecoder.ViewModels"
        mc:Ignorable="d"
        Title="GSPSample Configuration Decoder" Height="500" Width="800"
        ResizeMode="NoResize"
        Closing="Window_Closing">

    <Window.DataContext>
        <VM:MainWindowViewModel/>
    </Window.DataContext>
    <Grid Margin="0,0,0,10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="0"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Menu  Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Background="#00000000">
            <MenuItem Header="_File">
                <MenuItem Header="_Open Configuration" Click="PickFile_OnClick" />
                <MenuItem Header="_Select Output Directory" IsEnabled="{Binding DecodeComplete}" Click="PickDirectory_OnClick" />
                <MenuItem Header="_Save" IsEnabled="{Binding SaveBrowseComplete}" Command="{Binding SaveCommand}" />
            
                <Separator />
                    <MenuItem Header="_Exit" Command="{Binding CloseCommand}"/>
                </MenuItem>
            <MenuItem Header="_Tools" >
                <MenuItem Header="_Decode" IsEnabled="{Binding HasConfigPath}" Command="{Binding DecodeCommand}"/>
            </MenuItem>
        </Menu>
        <Separator Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="1"/>
        <Grid Margin="10,10,10,10" Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Image  Grid.Column="0" Grid.Row="0" Width="50" Height="50" Source="pack://application:,,,/GPSSampleDecoder;component/Images/cdc_push_pin.png"/>
            <TextBlock Grid.Column="1" Grid.Row="0"  Margin="15,4,4,4" VerticalAlignment="Center"  Text="GPSSample Decoder" HorizontalAlignment="Left" FontWeight="Bold" FontSize="18"/>
        </Grid>

        <Label  Grid.Column="0" Grid.Row="4" Grid.ColumnSpan="2" Margin="15,4,4,4" HorizontalAlignment="Left">
            <Label.Content>
                <AccessText TextWrapping="Wrap" Text="{Binding Instructions}" FontWeight="Bold"/>
            </Label.Content>
        </Label>

        <!-- UpdateSourceTrigger=PropertyChanged makes sure that changes in the TextBoxes are immediately applied to the model. -->
        <!--<TextBox Grid.Column="1" Grid.Row="1" Margin="4" Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" Width="200"/>-->

        <Grid Margin="15,10,10,10" Grid.Column="0" Grid.Row="5" Grid.ColumnSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBox x:Name="FilePathTextBox"   Grid.Column="0" Grid.Row="0" Margin="4" IsReadOnly="True"/>

            <Button  Grid.Column="1" Grid.Row="0" Margin="4" Width="100" Content="Browse" Click="PickFile_OnClick" />

        </Grid>

        <CheckBox Visibility="Hidden" Grid.Column="0" Grid.Row="6" Margin="20,10,0,10"
                  IsChecked="{Binding CreateCSV}" IsEnabled="False">Create CSV File</CheckBox>
        <CheckBox Visibility="Hidden" Grid.Column="1" Grid.Row="6" Margin="10,10,0,10" 
                  IsChecked="{Binding CreateExcel}" >Create Excel File</CheckBox>

        <StackPanel Grid.Column="1" Grid.ColumnSpan="1" Grid.Row="7"  VerticalAlignment="Top" Margin="10,0,15,0">
            <Button  Margin="4,0,0,0" Width="100" IsEnabled="{Binding HasConfigPath}" VerticalAlignment="Top" HorizontalAlignment="Right" Content="Decode" Command="{Binding DecodeCommand}" />
        </StackPanel>
        <Grid Grid.Row="8" Grid.Column="0" Grid.ColumnSpan="2" Margin="20,10,0,0" IsEnabled="{Binding DecodeComplete}" Visibility="{Binding DecodeVisibilty}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
               <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Separator Grid.ColumnSpan="2" Grid.Row="0" Margin="0,10,20,20"/>
            <TextBlock Grid.Column="0" Grid.Row="1" Text="Decoding Status:"/>
            <ProgressBar Grid.Column="1" Grid.Row="1"  Margin ="15,0,130,0" Minimum="0" Maximum="100" Value="{Binding PercentDecoded}" />
            <TextBlock Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2" Margin ="0,20,0,0" Text="{Binding OutputInstructions}" VerticalAlignment="Center" FontWeight="Bold"/>
            <TextBlock Grid.Column="0" Grid.Row="3" Text="Output Directory: " VerticalAlignment="Center"/>
            <Grid Margin="10,10,10,10" Grid.Column="1" Grid.Row="3" Grid.ColumnSpan="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBox x:Name="DecodePathTextBox"   Grid.Column="0" Grid.Row="0" Margin="4" IsReadOnly="True"
                    Text="{Binding PathToOutput, UpdateSourceTrigger=PropertyChanged}" />
                <Button  Grid.Column="1" Grid.Row="0" Width="100" Margin="4,4,10,4" Content="Browse" Click="PickDirectory_OnClick" />

            </Grid>
            <TextBlock Grid.Column="0" Grid.Row="4" Text="Saving Status:"/>
            <ProgressBar Grid.Column="1" Grid.Row="4"  Margin ="15,0,130,0" Minimum="0" Maximum="100" Value="{Binding PercentSaved}" />
            <StackPanel Grid.Column="1" Grid.ColumnSpan="1" Grid.Row="5"  VerticalAlignment="Top" Margin="10">
                <Button  Margin="4,0,10,0" Width="100" VerticalAlignment="Top" HorizontalAlignment="Right" Content="Save" IsEnabled="{Binding SaveBrowseComplete}" Command="{Binding SaveCommand}" />
            </StackPanel>

         <TextBlock  x:Name="VersionTextBox" Text="Database Version #318" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="6" HorizontalAlignment="Center" VerticalAlignment="Center"/>

      </Grid>

    </Grid>
</Window>
